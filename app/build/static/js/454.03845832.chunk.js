"use strict";(self.webpackChunke_learning_system=self.webpackChunke_learning_system||[]).push([[454],{2251:function(e,a,i){i.d(a,{p:function(){return l},s:function(){return n}});var t=i(6545),r=i(9574);const n=async e=>{const a=(0,t.IO)((0,t.hJ)(r.db,"users"),(0,t.ar)("role","==",e)),i=[];return(await(0,t.PL)(a)).forEach((e=>{i.push(e.data())})),i},l=async e=>{const a=(0,t.IO)((0,t.hJ)(r.db,"users"),(0,t.ar)("email","==",e)),i=[];return(await(0,t.PL)(a)).forEach((e=>{i.push(e.data())})),i}},9726:function(e,a,i){i.d(a,{Z:function(){return d}});var t=i(9860),r=i(1689),n=i(5272),l=i(891),s=i(8119),o=i(6417);var c=e=>{let{color:a,outline:i,size:r,sx:n,...l}=e;const c=(0,t.Z)(),d=a&&!i&&{color:c.palette.background.paper,bgcolor:`${a}.main`},u=i&&{color:a?`${a}.main`:"primary.main",bgcolor:c.palette.background.paper,border:"2px solid",borderColor:a?`${a}.main`:"primary.main"};let m={};switch(r){case"badge":m={width:c.spacing(3.5),height:c.spacing(3.5)};break;case"xs":m={width:c.spacing(4.25),height:c.spacing(4.25)};break;case"sm":m={width:c.spacing(5),height:c.spacing(5)};break;case"lg":m={width:c.spacing(9),height:c.spacing(9)};break;case"xl":m={width:c.spacing(10.25),height:c.spacing(10.25)};break;case"md":m={width:c.spacing(7.5),height:c.spacing(7.5)};break;default:m={}}return(0,o.jsx)(s.Z,{sx:{...d,...u,...m,...n},...l})};var d=e=>{let{title:a,link:i,icon:s}=e;const d=(0,t.Z)();return(0,o.jsx)(r.Z,{title:a||"Reference",placement:"left",children:(0,o.jsxs)(n.Z,{disableRipple:!0,children:[!s&&(0,o.jsx)(c,{component:l.Z,href:i,target:"_blank",alt:"MUI Logo",size:"badge",color:"primary",outline:!0,children:(0,o.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,o.jsx)("path",{d:"M100 260.9V131L212.5 195.95V239.25L137.5 195.95V282.55L100 260.9Z",fill:d.palette.primary[800]}),(0,o.jsx)("path",{d:"M212.5 195.95L325 131V260.9L250 304.2L212.5 282.55L287.5 239.25V195.95L212.5 239.25V195.95Z",fill:d.palette.primary.main}),(0,o.jsx)("path",{d:"M212.5 282.55V325.85L287.5 369.15V325.85L212.5 282.55Z",fill:d.palette.primary[800]}),(0,o.jsx)("path",{d:"M287.5 369.15L400 304.2V217.6L362.5 239.25V282.55L287.5 325.85V369.15ZM362.5 195.95V152.65L400 131V174.3L362.5 195.95Z",fill:d.palette.primary.main})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0",children:(0,o.jsx)("rect",{width:"300",height:"238.3",fill:"white",transform:"translate(100 131)"})})})]})}),s&&(0,o.jsx)(c,{component:l.Z,href:i,target:"_blank",size:"badge",color:"primary",outline:!0,children:s})]})})}},475:function(e,a,i){i.d(a,{l:function(){return t}});const t="https://static.vecteezy.com/system/resources/thumbnails/009/292/244/small/default-avatar-icon-of-social-media-user-vector.jpg"},6454:function(e,a,i){i.r(a),i.d(a,{default:function(){return S}});var t=i(7313),r=i(3497),n=i(9726),l=i(8268),s=i(2251),o=i(5281),c=i(9015),d=i(1806),u=i(1113),g=i(1405),h=i(4748),p=i(6545),x=i(9574);const b=async(e,a,i,t)=>{console.log(typeof m),e>=0&&e<=10&&a>=0&&a<=10?(await(0,p.r7)((0,p.JU)(x.db,"users",i),{[`listCourses.${t}`]:{midterm:e,final:a,average:(a+e)/2}}),await(async e=>{var a;let i=0,t=0;const r=(0,p.JU)(x.db,"users",e),n=await(0,p.QT)(r),l=await(null===(a=n.data())||void 0===a?void 0:a.listCourses),s=Object.keys(l).map((async e=>{var a,r;const n=(0,p.JU)(x.db,"courses",e),s=await(0,p.QT)(n),o=await(null===(a=s.data())||void 0===a?void 0:a.credit),c=await(null===(r=l[e])||void 0===r?void 0:r.average);i+=o*c,t+=parseInt(o),console.log(e,o,c)}));await Promise.all(s);const o=i/t;await(0,p.r7)((0,p.JU)(x.db,"users",e),{GPA:o})})(i)):alert("Enter the score again")};var v=i(9778),f=i(2886),w=i(475),j=i(2181),y=i(9064),k=i(6417);const C=e=>{let{data:a,courseCode:i}=e;const r=(0,t.useMemo)((()=>[{id:"student",header:"Student",columns:[{accessorFn:e=>`${e.name}`,id:"name",header:"Name",enableEditing:!1,size:250,Cell:e=>{let{renderedCellValue:a,row:i}=e;return(0,k.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,k.jsx)("div",{style:{width:"30px",height:"30px",objectFit:"contain",borderRadius:"50%"},children:(0,k.jsx)("img",{alt:"avatar",width:"100%",height:"100%",src:i.original.image?i.original.image:w.l,loading:"lazy",style:{borderRadius:"50%"}})}),(0,k.jsx)("span",{children:a})]})}},{accessorKey:"email",enableClickToCopy:!0,enableEditing:!1,filterVariant:"autocomplete",header:"Email",size:100}]},{id:"id",header:"Academic Information",columns:[{accessorKey:"midtermScore",enableHiding:!0,enableEditing:!0,header:"Midterm Score",size:50,Cell:e=>{var a,i;let{cell:t}=e;return(0,k.jsx)(d.Z,{component:"span",sx:e=>({backgroundColor:t.getValue()<5?e.palette.error.dark:t.getValue()>=5&&t.getValue()<8?e.palette.warning.dark:e.palette.success.dark,borderRadius:"0.25rem",color:"#fff",maxWidth:"9ch",p:"0.25rem"}),children:null===(a=t.getValue())||void 0===a||null===(i=a.toLocaleString)||void 0===i?void 0:i.call(a,"en-US",{minimumFractionDigits:1,maximumFractionDigits:1})})}},{accessorKey:"finalScore",enableHiding:!0,enableEditing:!0,header:"Final Score",size:50,Cell:e=>{var a,i;let{cell:t}=e;return(0,k.jsx)(d.Z,{component:"span",sx:e=>({backgroundColor:t.getValue()<5?e.palette.error.dark:t.getValue()>=5&&t.getValue()<8?e.palette.warning.dark:e.palette.success.dark,borderRadius:"0.25rem",color:"#fff",maxWidth:"9ch",p:"0.25rem"}),children:null===(a=t.getValue())||void 0===a||null===(i=a.toLocaleString)||void 0===i?void 0:i.call(a,"en-US",{minimumFractionDigits:1,maximumFractionDigits:1})})}},{accessorKey:"avergeScore",enableHiding:!0,enableEditing:!1,header:"Average Score",size:50,Cell:e=>{var a,i;let{cell:t}=e;return(0,k.jsx)(d.Z,{component:"span",sx:e=>({backgroundColor:t.getValue()<5?e.palette.error.dark:t.getValue()>=5&&t.getValue()<8?e.palette.warning.dark:e.palette.success.dark,borderRadius:"0.25rem",color:"#fff",maxWidth:"9ch",p:"0.25rem"}),children:null===(a=t.getValue())||void 0===a||null===(i=a.toLocaleString)||void 0===i?void 0:i.call(a,"en-US",{minimumFractionDigits:1,maximumFractionDigits:1})})}},{accessorKey:"uid",enableClickToCopy:!0,enableEditing:!1,filterVariant:"autocomplete",header:"Student ID",size:300}]}]),[]),n=(0,c.X0)({columns:r,data:a,enableEditing:!0,editDisplayMode:"modal",onEditingRowSave:async e=>{let{table:a,values:t}=e;const r=parseFloat(null===t||void 0===t?void 0:t.finalScore),n=parseFloat(null===t||void 0===t?void 0:t.midtermScore);await b(n,r,null===t||void 0===t?void 0:t.uid,i),a.setEditingRow(null)},onEditingRowCancel:()=>{},enableColumnFilterModes:!0,enableColumnOrdering:!0,enableGrouping:!0,enableColumnPinning:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,initialState:{showColumnFilters:!0,showGlobalFilter:!0,columnPinning:{left:["mrt-row-expand","mrt-row-select"],right:["mrt-row-actions"]}},paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiSearchTextFieldProps:{size:"small",variant:"outlined"},muiPaginationProps:{color:"secondary",rowsPerPageOptions:[10,20,30],shape:"rounded",variant:"outlined"},renderDetailPanel:e=>{let{row:a}=e;return(0,k.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",justifyContent:"space-around",left:"30px",maxWidth:"1000px",position:"sticky",width:"100%"},children:[(0,k.jsx)("div",{style:{width:"150px",height:"150px",objectFit:"contain",borderRadius:"50%"},children:(0,k.jsx)("img",{alt:"avatar",width:"100%",height:"100%",src:a.original.image?a.original.image:w.l,loading:"lazy",style:{borderRadius:"50%"}})}),(0,k.jsxs)(d.Z,{sx:{textAlign:"center"},children:[(0,k.jsx)(u.Z,{variant:"h4",children:"Department:"}),(0,k.jsx)(u.Z,{variant:"h1",children:a.original.department})]})]})},renderRowActionMenuItems:e=>{let{closeMenu:a}=e;return[(0,k.jsxs)(g.Z,{onClick:()=>{a()},sx:{m:0},children:[(0,k.jsx)(h.Z,{children:(0,k.jsx)(v.Z,{})}),"View Profile"]},0),(0,k.jsxs)(g.Z,{onClick:()=>{a()},sx:{m:0},children:[(0,k.jsx)(h.Z,{children:(0,k.jsx)(f.Z,{})}),"Send Email"]},1)]}});return(0,k.jsx)(c.P2,{table:n})};var Z=e=>{let{data:a,courseCode:i}=e,t=[];return(0,k.jsxs)(y._,{dateAdapter:j.y,children:[a.map((e=>{var a,r,n,l;const s=(null===e||void 0===e||null===(a=e.listCourses)||void 0===a||null===(r=a[i])||void 0===r?void 0:r.midterm)||0,o=(null===e||void 0===e||null===(n=e.listCourses)||void 0===n||null===(l=n[i])||void 0===l?void 0:l.final)||0,c=(s+o)/2,d=null===e||void 0===e?void 0:e.uid,u={...e,courseId:i,uid:d,midtermScore:s,finalScore:o,avergeScore:c};t.push(u)})),(0,k.jsx)(C,{data:t,courseCode:i})]})};var S=()=>{const[e,a]=(0,t.useState)([]),[i,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),m=localStorage.getItem("userId"),g=async()=>{const e=await(async()=>{const e=[];return(await(0,p.PL)((0,p.hJ)(x.db,"courses"))).forEach((a=>{e.push(a.data())})),e})();e&&u(e)};return(0,t.useEffect)((()=>{(async e=>{var i;const t=(0,p.JU)(x.db,"users",e),r=await(0,p.QT)(t),n=await(null===(i=r.data())||void 0===i?void 0:i.listStudents),l=await(0,s.s)("student"),o={};Object.keys(n||[]).forEach((e=>{n[e].forEach((a=>{const i=l.find((e=>e.uid===a));i&&(o[e]?o[e].push(i):o[e]=[i])}))})),c(o),a(Object.keys(o))})(m),g()}),[]),(0,k.jsx)(r.Z,{title:"Grading",secondary:(0,k.jsx)(n.Z,{icon:(0,k.jsx)(l.Z,{fontSize:"small"}),link:"https://tablericons.com/"}),children:e.map((e=>(0,k.jsxs)(k.Fragment,{children:[d.map((a=>{if(a.courseCode==e)return(0,k.jsxs)("h4",{children:["Couse name: ",a.courseName]},a.courseCode)})),i?(0,k.jsx)(Z,{data:i[e],courseCode:e}):(0,k.jsx)(o.Z,{}),(0,k.jsx)("br",{}),(0,k.jsx)("br",{})]})))})}}}]);