"use strict";(self.webpackChunke_learning_system=self.webpackChunke_learning_system||[]).push([[891],{9362:function(e,t,a){a.d(t,{o:function(){return s}});var n=a(6545),i=a(9574),r=a(9709);const s=e=>{(0,r.Xb)(i.I,e.email,e.password).then((t=>{console.log(t),(async(e,t)=>{const a=e.email,r=e.password,s=e.role;console.log(a,r,s),t&&(await(0,n.pl)((0,n.JU)(i.db,"users",t.uid),{uid:t.uid,email:a,password:r,role:s}),console.log("Create user successfully"))})(e,t.user)})).catch((e=>{console.log(e)}))}},2251:function(e,t,a){a.d(t,{p:function(){return s},s:function(){return r}});var n=a(6545),i=a(9574);const r=async e=>{const t=(0,n.IO)((0,n.hJ)(i.db,"users"),(0,n.ar)("role","==",e)),a=[];return(await(0,n.PL)(t)).forEach((e=>{a.push(e.data())})),a},s=async e=>{const t=(0,n.IO)((0,n.hJ)(i.db,"users"),(0,n.ar)("email","==",e)),a=[];return(await(0,n.PL)(t)).forEach((e=>{a.push(e.data())})),a}},7746:function(e,t,a){a.d(t,{$F:function(){return d},Jq:function(){return u},TF:function(){return o},u2:function(){return l},wi:function(){return c}});var n=a(9574),i=a(6545),r=a(7120),s=a(2251);const l=async(e,t)=>{const a=e.target,r=a.name.value,s=a.phone.value,l=a.identitycard.value,o=a.address.value;try{if(t)return await(0,i.r7)((0,i.JU)(n.db,"users",t.uid),{uid:t.uid,name:r,phone:s,identitycard:l,address:o}),console.log("Profile updated successfully"),"/"}catch(c){throw console.error("Error submitting profile:",c),c}},o=async(e,t)=>{try{if(e){const a=await(0,s.p)(e),r=t;a.length>0&&(await(0,i.r7)((0,i.JU)(n.db,"users",a[0].uid),{uid:a[0].uid,isActive:r}),console.log("Status updated successfully"))}}catch(a){throw console.error("Error updating status:",a),a}},c=async e=>{try{const t=e.email;if(t){const a=await(0,s.p)(t);a.length>0&&(await(0,i.r7)((0,i.JU)(n.db,"users",a[0].uid),{uid:a[0].uid,name:e.name,major:e.major,department:e.department,startDate:e.startDate}),console.log("Student Information updated successfully"))}}catch(t){throw console.error("Error updating information:",t),t}},d=async e=>{try{const t=e.email;if(t){const a=await(0,s.p)(t);a.length>0&&(await(0,i.r7)((0,i.JU)(n.db,"users",a[0].uid),{uid:a[0].uid,name:e.name,salary:e.salary,jobTitle:e.jobTitle,department:e.department,startDate:e.startDate}),console.log("Student Information updated successfully"))}}catch(t){throw console.error("Error updating information:",t),t}},u=async(e,t)=>{const a=(new Date).getTime(),s=e.target.file.files[0],l=(0,r.iH)(n.t,`avatar_${a}`);try{await(0,r.B0)(l,s);const e=await(0,r.Jt)(l);if(t)return await(0,i.r7)((0,i.JU)(n.db,"users",t.uid),{uid:t.uid,image:e}),console.log("Avatar updated successfully"),e}catch(o){throw console.error("Error submitting profile:",o),o}}},9726:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(9860),i=a(1689),r=a(5272),s=a(891),l=a(8119),o=a(6417);var c=e=>{let{color:t,outline:a,size:i,sx:r,...s}=e;const c=(0,n.Z)(),d=t&&!a&&{color:c.palette.background.paper,bgcolor:`${t}.main`},u=a&&{color:t?`${t}.main`:"primary.main",bgcolor:c.palette.background.paper,border:"2px solid",borderColor:t?`${t}.main`:"primary.main"};let h={};switch(i){case"badge":h={width:c.spacing(3.5),height:c.spacing(3.5)};break;case"xs":h={width:c.spacing(4.25),height:c.spacing(4.25)};break;case"sm":h={width:c.spacing(5),height:c.spacing(5)};break;case"lg":h={width:c.spacing(9),height:c.spacing(9)};break;case"xl":h={width:c.spacing(10.25),height:c.spacing(10.25)};break;case"md":h={width:c.spacing(7.5),height:c.spacing(7.5)};break;default:h={}}return(0,o.jsx)(l.Z,{sx:{...d,...u,...h,...r},...s})};var d=e=>{let{title:t,link:a,icon:l}=e;const d=(0,n.Z)();return(0,o.jsx)(i.Z,{title:t||"Reference",placement:"left",children:(0,o.jsxs)(r.Z,{disableRipple:!0,children:[!l&&(0,o.jsx)(c,{component:s.Z,href:a,target:"_blank",alt:"MUI Logo",size:"badge",color:"primary",outline:!0,children:(0,o.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,o.jsx)("path",{d:"M100 260.9V131L212.5 195.95V239.25L137.5 195.95V282.55L100 260.9Z",fill:d.palette.primary[800]}),(0,o.jsx)("path",{d:"M212.5 195.95L325 131V260.9L250 304.2L212.5 282.55L287.5 239.25V195.95L212.5 239.25V195.95Z",fill:d.palette.primary.main}),(0,o.jsx)("path",{d:"M212.5 282.55V325.85L287.5 369.15V325.85L212.5 282.55Z",fill:d.palette.primary[800]}),(0,o.jsx)("path",{d:"M287.5 369.15L400 304.2V217.6L362.5 239.25V282.55L287.5 325.85V369.15ZM362.5 195.95V152.65L400 131V174.3L362.5 195.95Z",fill:d.palette.primary.main})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0",children:(0,o.jsx)("rect",{width:"300",height:"238.3",fill:"white",transform:"translate(100 131)"})})})]})}),l&&(0,o.jsx)(c,{component:s.Z,href:a,target:"_blank",size:"badge",color:"primary",outline:!0,children:l})]})})}},475:function(e,t,a){a.d(t,{l:function(){return n}});const n="https://static.vecteezy.com/system/resources/thumbnails/009/292/244/small/default-avatar-icon-of-social-media-user-vector.jpg"},7487:function(e,t,a){a.d(t,{v:function(){return n}});const n=e=>{let t=e.split(",").filter((e=>e&&e.trim()));console.log(t);let a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]+$/i;for(let n=0;n<t.length;n++)if(!a.test(t[n].replace(/\s/g,"")))return!1;return!(t.length>10)}},7891:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var n=a(7313),i=a(3497),r=a(9726),s=a(8268),l=a(2251),o=a(5281),c=a(9015),d=a(1806),u=a(1113),h=a(1405),p=a(4748),m=a(7551),g=a(1095),x=a(7746),f=a(6530),w=a(9778),b=a(2886),j=a(475),y=a(2181),v=a(9064),Z=a(6417);const C=e=>{let{data:t,openModal:a}=e;const i=(0,n.useMemo)((()=>[{id:"student",header:"Student",columns:[{accessorFn:e=>`${e.name}`,id:"name",header:"Name",size:250,Cell:e=>{let{renderedCellValue:t,row:a}=e;return(0,Z.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,Z.jsx)("div",{style:{width:"30px",height:"30px",objectFit:"contain",borderRadius:"50%"},children:(0,Z.jsx)("img",{alt:"avatar",width:"100%",height:"100%",src:a.original.image?a.original.image:j.l,loading:"lazy",style:{borderRadius:"50%"}})}),(0,Z.jsx)("span",{children:t})]})}},{accessorKey:"email",enableClickToCopy:!0,enableEditing:!1,filterVariant:"autocomplete",header:"Email",size:300},{accessorKey:"isActive",enableEditing:!1,accessorFn:e=>""+(e.isActive?"Active":"Inactive"),header:"Active Status",size:100,Cell:e=>{let{cell:t}=e;return(0,Z.jsx)(d.Z,{component:"span",sx:e=>({backgroundColor:"Active"===t.getValue()?e.palette.info.light:"#808080",borderRadius:"0.25rem",color:"#fff",maxWidth:"9ch",p:"0.25rem"}),children:t.getValue()})}}]},{id:"id",header:"Academic Information",columns:[{accessorKey:"GPA",enableHiding:!0,enableEditing:!1,filterFn:"between",header:"GPA",size:200,Cell:e=>{var t,a;let{cell:n}=e;return(0,Z.jsx)(d.Z,{component:"span",sx:e=>({backgroundColor:n.getValue()<5?e.palette.error.dark:n.getValue()>=5&&n.getValue()<8?e.palette.warning.dark:e.palette.success.dark,borderRadius:"0.25rem",color:"#fff",maxWidth:"9ch",p:"0.25rem"}),children:null===(t=n.getValue())||void 0===t||null===(a=t.toLocaleString)||void 0===a?void 0:a.call(t,"en-US",{minimumFractionDigits:1,maximumFractionDigits:1})})}},{accessorKey:"major",header:"Major",size:350},{accessorKey:"department",header:"Department",size:350},{accessorFn:e=>new Date(e.startDate),id:"startDate",header:"Start Date",filterVariant:"date",filterFn:"lessThan",sortingFn:"datetime",muiEditTextFieldProps:{type:"date",required:!0},Cell:e=>{var t;let{cell:a}=e;return null===(t=new Date(a.getValue()))||void 0===t?void 0:t.toLocaleDateString()},Header:e=>{let{column:t}=e;return(0,Z.jsx)("em",{children:t.columnDef.header})},muiFilterTextFieldProps:{sx:{minWidth:"250px"}}}]}]),[]),r=(0,c.X0)({columns:i,data:t,enableEditing:!0,editDisplayMode:"modal",onEditingRowSave:async e=>{let{table:t,values:a}=e;console.log(a),await(0,x.wi)(a),t.setEditingRow(null)},onEditingRowCancel:()=>{},enableColumnFilterModes:!0,enableColumnOrdering:!0,enableGrouping:!0,enableColumnPinning:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,initialState:{showColumnFilters:!0,showGlobalFilter:!0,columnPinning:{left:["mrt-row-expand","mrt-row-select"],right:["mrt-row-actions"]}},paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiSearchTextFieldProps:{size:"small",variant:"outlined"},muiPaginationProps:{color:"secondary",rowsPerPageOptions:[10,20,30],shape:"rounded",variant:"outlined"},renderDetailPanel:e=>{let{row:t}=e;return(0,Z.jsxs)(d.Z,{sx:{alignItems:"center",display:"flex",justifyContent:"space-around",left:"30px",maxWidth:"1000px",position:"sticky",width:"100%"},children:[(0,Z.jsx)("div",{style:{width:"150px",height:"150px",objectFit:"contain",borderRadius:"50%"},children:(0,Z.jsx)("img",{alt:"avatar",width:"100%",height:"100%",src:t.original.image?t.original.image:j.l,loading:"lazy",style:{borderRadius:"50%"}})}),(0,Z.jsxs)(d.Z,{sx:{textAlign:"center"},children:[(0,Z.jsx)(u.Z,{variant:"h4",children:"Department:"}),(0,Z.jsx)(u.Z,{variant:"h1",children:t.original.department})]})]})},renderRowActionMenuItems:e=>{let{closeMenu:t}=e;return[(0,Z.jsxs)(h.Z,{onClick:()=>{t()},sx:{m:0},children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsx)(w.Z,{})}),"View Profile"]},0),(0,Z.jsxs)(h.Z,{onClick:()=>{t()},sx:{m:0},children:[(0,Z.jsx)(p.Z,{children:(0,Z.jsx)(b.Z,{})}),"Send Email"]},1)]},renderTopToolbar:e=>{let{table:t}=e;return(0,Z.jsxs)(d.Z,{sx:e=>({backgroundColor:(0,m.$n)(e.palette.background.default,.05),display:"flex",gap:"0.5rem",p:"8px",justifyContent:"space-between"}),children:[(0,Z.jsxs)(d.Z,{sx:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,Z.jsx)(c.bw,{table:t}),(0,Z.jsx)(c.kx,{table:t})]}),(0,Z.jsx)(d.Z,{children:(0,Z.jsxs)(d.Z,{sx:{display:"flex",gap:"0.5rem"},children:[(0,Z.jsx)(g.Z,{color:"error",disabled:!t.getIsSomeRowsSelected(),onClick:async()=>{t.getSelectedRowModel().flatRows.map((e=>{(0,x.TF)(e.getValue("email"),!1),f.ZP.success("Deactivating "+e.getValue("name"))}))},variant:"contained",children:"Deactivate"}),(0,Z.jsx)(g.Z,{color:"success",disabled:!t.getIsSomeRowsSelected(),onClick:async()=>{t.getSelectedRowModel().flatRows.map((e=>{(0,x.TF)(e.getValue("email"),!0),f.ZP.success("Activating "+e.getValue("name"))}))},variant:"contained",children:"Activate"}),(0,Z.jsx)(g.Z,{color:"info",onClick:a,variant:"contained",children:"Add New Student Account"})]})})]})}});return(0,Z.jsx)(c.P2,{table:r})};var k=e=>{let{data:t,openModal:a}=e;return(0,Z.jsxs)(v._,{dateAdapter:y.y,children:[(0,Z.jsx)("div",{children:(0,Z.jsx)(f.x7,{position:"top-right"})}),(0,Z.jsx)(C,{data:t,openModal:a})]})},S=a(9019),A=a(4469),V=a(4631),P=a(3604),D=a(1550),F=a(6467),M=a(4117),L=a(7762),R=a(5480),E=a(7487),T=a(9362);var z=e=>{let{openAddDialog:t,handleAddDialogClose:a,fetchStudents:i}=e;const[r,s]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),p=()=>{s(""),o(""),d(""),h(""),a()};return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(A.Z,{open:t,onClose:p,"aria-labelledby":"user-view-edit",sx:{"& .MuiPaper-root":{width:"100%",maxWidth:650,p:[2,10]}},"aria-describedby":"user-view-edit-description",children:[(0,Z.jsx)(P.Z,{id:"user-view-edit",sx:{textAlign:"center",fontSize:"1.5rem !important"},children:"Add New Student Account"}),(0,Z.jsxs)(F.Z,{children:[(0,Z.jsx)(L.Z,{variant:"body2",id:"user-view-edit-description",sx:{textAlign:"center",mb:7},children:"Adding a new student account with the following information."}),(0,Z.jsx)("form",{children:(0,Z.jsxs)(S.ZP,{container:!0,spacing:6,children:[(0,Z.jsx)(S.ZP,{item:!0,xs:12,sm:6,children:(0,Z.jsxs)(D.Z,{error:""!==c,fullWidth:!0,children:[(0,Z.jsx)(V.Z,{error:""!==c,label:"Email",value:r,onChange:e=>{s(e.target.value),d("")}}),(0,Z.jsx)(R.Z,{id:"component-error-text",children:c})]})}),(0,Z.jsx)(S.ZP,{item:!0,xs:12,sm:6,children:(0,Z.jsxs)(D.Z,{error:""!==u,fullWidth:!0,children:[(0,Z.jsx)(V.Z,{error:""!==u,label:"Password",value:l,onChange:e=>{o(e.target.value),h("")}}),(0,Z.jsx)(R.Z,{id:"component-error-text",children:u})]})})]})})]}),(0,Z.jsxs)(M.Z,{sx:{justifyContent:"center"},children:[(0,Z.jsx)(g.Z,{variant:"contained",sx:{mr:1},onClick:async()=>{if(""===r&&d("This field cannot be empty"),(0,E.v)(r)?""===l&&h("This field cannot be empty"):d("Must be a valid email"),""===r||""===l||!(0,E.v)(r))return;const e={email:r,password:l,role:"student"};await(0,T.o)(e),p(),i()},children:"Add"}),(0,Z.jsx)(g.Z,{variant:"outlined",color:"secondary",onClick:p,children:"Cancel"})]})]})})};var I=()=>{const[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!1),d=async()=>{const e=await(0,l.s)("student");e&&t(e)};(0,n.useEffect)((()=>{d()}),[]);return(0,Z.jsxs)(i.Z,{title:"Student Management",secondary:(0,Z.jsx)(r.Z,{icon:(0,Z.jsx)(s.Z,{fontSize:"small"}),link:"https://tablericons.com/"}),children:[e?(0,Z.jsx)(k,{data:e,openModal:()=>c(!0)}):(0,Z.jsx)(o.Z,{}),(0,Z.jsx)(z,{openAddDialog:a,handleAddDialogClose:()=>c(!1),fetchStudents:d})]})}}}]);